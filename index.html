<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>夏天吃西瓜</title><!--Bootstrap--><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/css/main.css"></head><body><nav class="navbar navbar-default"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"><span class="sr-only">Toggle navgation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="">夏天吃西瓜</a></div><div class="collapse navbar-collapse" id="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">首页</a></li><li><a href="/about/">关于</a></li></ul></div></div></nav><div class="content"><div class="container"><div class="row"><div class="main col-xs-12 col-md-8"><div class="home"><h1 class="page-heading">最新文章</h1><article class="post"><header class="post-header"><h1 class="post-title"><a href="/javascript/2016/09/26/event-object/">事件对象－Javascript高级程序设计</a></h1><p class="post-meta">2016年9月26日 <a href="/category/javascript/" title="javascript">javascript</a></p></header></article><div class="post-content"><p>在触发dom上某个事件时，会产生一个事件对象event</p><table><thead><tr><th>属性/方法</th><th>类型</th><th>读/写</th><th>说明</th></tr></thead><tbody><tr><td>bubbles</td><td>Boolean</td><td>只读</td><td>表明事件是否冒泡</td></tr><tr><td>cancelable</td><td>Boolean</td><td>只读</td><td>表明是否可以取消事件的默认行为</td></tr><tr><td>currentTarget</td><td>Element</td><td>只读</td><td>其他事件处理程序正在处理事件的那个元素</td></tr><tr><td>defaultPrevented</td><td>Boolean</td><td>只读</td><td>为true表示已经调用了preventDefault()(DOM3级事件中新增)</td></tr><tr><td>detail</td><td>Integer</td><td>只读</td><td>与事件相关的细节信息</td></tr><tr><td>eventPhase</td><td>Integer</td><td>只读</td><td>调用事件处理程序的阶段:1表示捕获阶段，2表示“处于目标”，3表示冒泡阶段</td></tr><tr><td>preventDefault()</td><td>Function</td><td>只读</td><td>取消事件的默认行为。如果cancelable是true，则可以使用这个方法</td></tr><tr><td>stopImmediatePropagation()</td><td>Function</td><td>只读</td><td>取消事件的进一步捕获或冒泡，同时阻止任何事件处理程序被调用(dom3级事件中新增)</td></tr><tr><td>stopProgapation()</td><td>Function</td><td>只读</td><td>取消事件进一步捕获或冒泡。如果bubbles为true，则可以使用这个方法</td></tr><tr><td>target</td><td>Element</td><td>只读</td><td>事件的目标</td></tr><tr><td>trusted</td><td>Boolean</td><td>只读</td><td>为true表示事件是油浏览器生成的，为false表示事件是由开发人员通过javascript创建的(DOM3事件新增)</td></tr><tr><td>type</td><td>String</td><td>只读</td><td>被触发事件的类型</td></tr><tr><td>view</td><td>AtractView</td><td>只读</td><td>与事件关联的抽象视图。等同于发生事件的window对象</td></tr></tbody></table><h2 id="section">事件类型</h2><ul><li>UI(User Interface,用户界面)事件，当用户与页面上的元素交互时触发</li><li>焦点事件，当元素失去或获得焦点时触发</li><li>鼠标事件，当用户通过鼠标在页面上执行操作时触发</li><li>滚轮事件，当使用鼠标滚轮(或类似设备)时触发</li><li>文本事件，当在文档中输入文本时触发</li><li>键盘事件，当用户通过键盘在页面上执行操作时触发</li><li>合成事件，当为IME(Input Method Editor,输入法编辑器)输入字符时触发</li><li>变动事件，当底层dom结构发生变化时触发</li></ul><h3 id="ui">UI事件</h3><p>load：当页面完全加载后在window上面触发，当所有框架都加载完毕时在框架集上面触发，当图像加载完毕时在<code class="highlighter-rouge">&lt;img /&gt;</code>元素上触发，或者当嵌入的内容加载完毕时在<code class="highlighter-rouge">&lt;object&gt;</code>元素上面触发</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">"load"</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">"Loaded"</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure><p>unload：当页面完全卸载后在window上面触发，当所有框架都卸载完毕时在框架集上面触发，或者当嵌入的元素卸载完毕后在<code class="highlighter-rouge">&lt;object&gt;</code>元素上面触发</p><p>abort：在用户停止下载过程时，如果嵌入的内容没有加载完，则在<code class="highlighter-rouge">&lt;object&gt;</code>元素上面触发</p><p>error：当发生Javascript错误时在window上面触发，或者当有一或多个框架无法加载时在框架集上面触发</p><p>select：当用户选择文本框（<code class="highlighter-rouge">&lt;input&gt;</code>或<code class="highlighter-rouge">&lt;textarea&gt;</code>）中的一或多个字符时触发。</p><p>resize：当窗口或框架的大小变化时在window或框架上面触发</p><p>scroll：当用户滚动滚动条的元素中的内容时，在该元素上面触发。<code class="highlighter-rouge">&lt;body&gt;</code>元素中包含所加载页面的滚动条</p><p>要确定浏览器是否支持DOM2级事件规定的HTML事件，代码如下</p><div class="highlighter-rouge"><pre class="highlight"><code>var isSupported = document.implementation.hasFeature("HTMLEvents","2.0")
</code></pre></div><p>确定浏览器是否支持DOM3级事件规定的HTML事件，代码如下</p><div class="highlighter-rouge"><pre class="highlight"><code>var isSupported = document.implementation.hasFeature("HTMLEvents","3.0")
</code></pre></div><h3 id="section-1">焦点事件</h3><p>焦点事件会在页面元素获得或失去焦点时触发。利用这些事件并与document.hasFoucs()方法及document.activeElement属性配合，可以知晓用户在页面上的行踪。</p><p>blur：在元素失去焦点时触发。这个事件不会冒泡，所有浏览器都支持它</p><p>focus：在元素获得焦点时触发。这个事件不会冒泡，所有浏览器都支持它</p><p>focusin：在元素获得焦点时触发。这个事件与HTML事件focus等价，但它冒泡。支持这个事件的浏览器有IE5.5+,Safari5.1+,Opera11.5+和Chrome</p><p>focusout：在元素失去焦点时触发。这个事件是HTML事件blur的通用版本。支持这个事件的浏览器有IE5.5+,Safari5.1+,Opera11.5+和Chrome</p><h3 id="section-2">鼠标与滚轮事件</h3><p>click：单击鼠标或按下回车时触发。 dbclick：双击鼠标按钮时触发。 mousedown：按下任意鼠标按钮时触发 mouseup：释放鼠标按钮时触发 mouseenter：在鼠标光标从元素外部首次移动到元素范围之内时触发。这个事件不冒泡，而且在光标移到后代元素上不会触发 mouseleave：在位于元素上方的鼠标光标移到元素之外触发。这个事件不冒泡，，而且在光标移到后代元素上不会触发 mousemove：当鼠标指针在元素内部移动时重复的触发。 mouseout：在鼠标指针位于一个元素的正上方，然后用户将其移入另一个元素时触发。又移入的另外一个元素可能位于前一个元素的外部，也可能是这个元素的子元素。 mouseover：当鼠标指针位于一个元素外部，然后用户将其首次移入到另一个元素边界之内时触发。</p><p><strong>客户区坐标位置</strong></p><p>clientX/clientY (相对于浏览器窗口)</p><p>它们的值表示事件发生时鼠标指针在视口中的水平坐标和垂直坐标 不包括页面滚动的距离，因此这个值并不表示鼠标在页面上的位置</p><p><strong>页面坐标位置</strong></p><p>pageX/pageY (相对于页面)</p><p>它们的值表示鼠标光标在页面中的位置，坐标是从页面本身而非视口的左边和顶边计算的</p><p><strong>屏幕坐标位置</strong></p><p>screenX/screenY (相对于电脑屏幕)</p><h2 id="section-3">内存和性能</h2><h3 id="section-4">事件委托</h3><p>对“事件处理程序过多”问题的解决方案就是事件委托。事件委托利用了事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。</p><div class="highlighter-rouge"><pre class="highlight"><code>
EventUtil.addHandler(list,'click',(e)=&gt;{
	let target = EventUtil.getTarget(e);
	switch(target.id) {
		case 'mouse1':
			console.log(1);
			break;
		case 'mouse2':
			console.log(2);
			break;
		case 'mouse3':
			console.log(3);
			break;
	}
})
</code></pre></div><p>优点：</p><ul><li>document对象很快就可以访问，而且可以在页面生命周期的任何时点上为它添加事件处理程序（无需等待DOMContentLoaded或load事件）。换句话说只要可单击的元素呈现在页面上，就可以立即具备适当功能。</li><li>在页面中设置事件处理程序所需的时间更少。只添加一个事件处理程序所需的DOM引用更少，所花的时间也更少。</li><li>整个页面占用的内存空间更少，能够提升整体性能。</li></ul></div><article class="post"><header class="post-header"><h1 class="post-title"><a href="/jekyll/update/2016/09/22/first-post/">我的第一篇jekyll博客</a></h1><p class="post-meta">2016年9月22日 <a href="/category/jekyll/" title="jekyll">jekyll</a>, <a href="/category/update/" title="update">update</a></p></header></article><div class="post-content"><p>作为一名coder，怎么能没有一个个人博客呢？😄</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'jsummer'</span><span class="p">;</span></code></pre></figure></div><nav><ul class="pager"></ul></nav></div></div><div class="sidebar col-xs-12 col-md-4"><aside class="about"><h3 class="aside-title">关于</h3><div class="aside-content"><p>什么时候就干什么事</p></div></aside><aside class="categories_list"><h3 class="aside-title">分类</h3><div class="aside-content"><ul><li><a href="/category/jekyll/" title="jekyll">jekyll</a> (1)</li><li><a href="/category/update/" title="update">update</a> (1)</li><li><a href="/category/javascript/" title="javascript">javascript</a> (1)</li></ul></div></aside><aside class="subscribe"><h3 class="aside-title">订阅</h3><div class="aside-content"><p>订阅 <a href="./feed.xml">RSS</a></p></div></aside></div></div></div></div><footer class="footer"><p>&copy;2016 夏天吃西瓜</p><p>Jekyll 3.2.1</p></footer></body></html>